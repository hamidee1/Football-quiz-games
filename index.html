<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>دوري أبطال الأسئلة — لعبة كرة القدم</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { background: linear-gradient(180deg,#064e3b,#065f46); }
    .card { background: rgba(255,255,255,0.03); }
    .option {
      transition: transform .12s ease, box-shadow .12s ease, background-color .18s ease;
      user-select:none;
    }
    .option:hover:not(.disabled) { transform: translateY(-3px); cursor: pointer; }
    .correct { background-color: #16a34a !important; color: white !important; }
    .wrong { background-color: #dc2626 !important; color: white !important; opacity: 0.95; }
    .disabled { pointer-events: none; opacity: .9; }
    .heart { color: #ffb4b4; }
    .blink {
      animation: blinkAnim 0.5s ease-in-out 2;
    }
    @keyframes blinkAnim {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.4; }
    }
    /* timer bar */
    .timer-bg { background: rgba(255,255,255,0.08); height: 8px; border-radius: 8px; overflow: hidden; }
    .timer-fill { height: 100%; background: linear-gradient(90deg,#f59e0b,#ef4444); width: 0%; transition: width 0.25s linear; }

    /* اهتزاز عند الخطأ */
    .shake {
      animation: shakeAnim 0.4s;
    }
    @keyframes shakeAnim {
      0%, 100% { transform: translateX(0); }
      20%, 60% { transform: translateX(-6px); }
      40%, 80% { transform: translateX(6px); }
    }
  </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4 text-white">
  <div class="w-full max-w-3xl">
    <header class="mb-4 text-center">
      <h1 class="text-4xl font-extrabold">⚽ دوري أبطال الأسئلة</h1>
      <p class="text-sm mt-1 opacity-80">100 سؤال — 4 اختيارات لكل سؤال — 3 قلوب — 15 ثانية لكل سؤال</p>
    </header>

    <!-- اختيار اللغة -->
    <div class="mb-4 flex justify-center gap-2">
      <button id="langAr" class="px-3 py-1 rounded bg-green-600 hover:bg-green-700">العربية</button>
      <button id="langEn" class="px-3 py-1 rounded bg-gray-600 hover:bg-gray-700">English</button>
    </div>

    <!-- اختيار نمط اللعب -->
    <div class="mb-4 flex justify-center gap-4 text-white/90">
      <label><input type="radio" name="mode" value="challenge" checked> وضع التحدي</label>
      <label><input type="radio" name="mode" value="training"> وضع التدريب</label>
    </div>

    <main id="game" class="card p-6 rounded-2xl shadow-2xl">
      <div class="flex justify-between items-center mb-3">
        <div><span id="labelQuestion">السؤال</span> <span id="current">1</span> <span id="labelOf">من</span> <span id="total">100</span></div>
        <div class="flex items-center gap-4">
          <div><span id="labelScore">النقاط</span>: <span id="score">0</span></div>
          <div><span id="labelBest">أفضل نتيجة</span>: <span id="best">0</span></div>
          <div id="lives" class="flex items-center gap-1 text-xl" aria-label="قلوب الحياة">❤️❤️❤️</div>
        </div>
      </div>

      <div id="stageBanner" class="mb-3 text-center font-semibold">دور المجموعات</div>

      <div id="questionBox" class="mb-4 p-5 rounded-xl border border-white/10 min-h-[80px]">
        <div id="question" class="text-lg font-medium" aria-live="polite" aria-atomic="true">جاري التحميل...</div>
      </div>

      <div id="options" class="grid grid-cols-1 md:grid-cols-2 gap-3 mb-4" role="listbox" aria-label="خيارات السؤال"></div>

      <div class="mb-4 flex items-center gap-4">
        <div class="flex-1">
          <div class="timer-bg" aria-hidden="true">
            <div id="timerFill" class="timer-fill"></div>
          </div>
          <div class="text-xs opacity-80 mt-2" aria-live="polite" aria-atomic="true">
            <span id="labelTimeLeft">الوقت المتبقي</span>: <span id="timerText">15</span> <span id="labelSeconds">ثانية</span>
          </div>
        </div>
        <button id="hintBtn" class="px-3 py-1 bg-yellow-500 text-black rounded hover:bg-yellow-400" aria-label="زر تلميح">تلميح</button>
      </div>

      <div class="flex justify-between items-center">
        <div class="w-3/4">
          <div class="h-3 bg-white/10 rounded" aria-hidden="true">
            <div id="progressBar" class="h-3 bg-green-500 rounded w-0"></div>
          </div>
        </div>
        <div class="text-sm opacity-80" aria-live="polite" aria-atomic="true">
          <span id="labelStage">المرحلة</span>: <span id="stage">المجموعات</span>
        </div>
      </div>

      <div class="mt-6 flex justify-center gap-3">
        <button id="nextBtn" class="px-4 py-2 bg-white/10 rounded hover:bg-white/20" disabled aria-label="التالي">التالي</button>
        <button id="restartBtn" class="px-4 py-2 bg-blue-600 rounded hover:bg-blue-700" aria-label="إعادة اللعبة">إعادة اللعبة</button>
        <button id="downloadBtn" class="px-4 py-2 bg-green-600 rounded hover:bg-green-700" aria-label="تحميل الملف">تحميل الملف</button>
      </div>

      <div class="mt-4 text-center text-sm opacity-70" id="streakInfo" aria-live="polite" aria-atomic="true"></div>
    </main>

    <footer class="mt-6 text-center text-xs opacity-70" id="footerInfo">
      احفظ الملف كـ index.html وارفعه على GitHub — إن أردت أساعدك في إعداد Pages.
    </footer>
  </div>

<script>
/* ===========================
   لعبة الأسئلة — كود معزز بميزات
   =========================== */

document.addEventListener('DOMContentLoaded', () => {
  // ===== إعدادات اللعبة =====
  const TIME_PER_QUESTION = 15; // ثانية
  const AUTO_NEXT_DELAY = 1500; // مللي ثانية
  const POINTS_CORRECT = 10;
  const POINTS_WRONG = 0;
  const START_LIVES = 3;

  // ===== عناصر DOM =====
  const totalEl = document.getElementById('total');
  const currentEl = document.getElementById('current');
  const scoreEl = document.getElementById('score');
