<!doctype html>

<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>دوري أبطال الأسئلة - لعبة كرة القدم</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { background: linear-gradient(180deg,#064e3b,#065f46); }
    .card { background: rgba(255,255,255,0.03); }
    .option { transition: transform .12s ease, box-shadow .12s ease; }
    .option:hover { transform: translateY(-3px); }
    .correct { animation: pop 0.35s ease; }
    .wrong { opacity: .6; }
    @keyframes pop { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }
  </style>
</head>
<body class="min-h-screen flex items-center justify-center p-6 text-white">
  <div class="w-full max-w-3xl">
    <header class="mb-6 text-center">
      <h1 class="text-4xl font-extrabold">⚽ دوري أبطال الأسئلة</h1>
      <p class="text-sm mt-2 opacity-80">اختبر معلوماتك في كرة القدم — 100 سؤال، 4 خيارات لكل سؤال.</p>
    </header><main id="game" class="card p-6 rounded-2xl shadow-2xl">
  <div id="stageBanner" class="mb-4 text-center font-semibold">دور المجموعات</div>
  <div class="flex justify-between items-center mb-3">
    <div>السؤال <span id="current">1</span> من <span id="total">100</span></div>
    <div>النقاط: <span id="score">0</span></div>
  </div>

  <div id="questionBox" class="mb-4 p-5 rounded-xl border border-white/10 min-h-[80px]">
    <div id="question" class="text-lg font-medium">جاري التحميل...</div>
  </div>

  <div id="options" class="grid grid-cols-1 md:grid-cols-2 gap-3"></div>

  <div class="mt-6 flex justify-between items-center">
    <div id="progressWrap" class="w-3/4">
      <div class="h-3 bg-white/10 rounded">
        <div id="progressBar" class="h-3 bg-green-500 rounded w-0"></div>
      </div>
    </div>
    <div class="text-sm opacity-80">المرحلة: <span id="stage">المجموعات</span></div>
  </div>

  <div class="mt-6 flex justify-center gap-3">
    <button id="nextBtn" class="px-4 py-2 bg-white/10 rounded hover:bg-white/20" disabled>التالي</button>
    <button id="restartBtn" class="px-4 py-2 bg-blue-600 rounded hover:bg-blue-700">إعادة اللعبة</button>
    <button id="downloadBtn" class="px-4 py-2 bg-green-600 rounded hover:bg-green-700">تحميل الملف</button>
  </div>
</main>

<footer class="mt-6 text-center text-xs opacity-70">
  تم إنشاء اللعبة تلقائيًا — يمكنك رفع ملف index.html إلى GitHub Pages ليعمل مباشرة.
</footer>

  </div><script>
// اللعبة الرئيسية
document.addEventListener('DOMContentLoaded', () => {
  try {
    // === مجموعة الأسئلة (100 سؤال) ===
    const questions = [
      { question: "كم عدد اللاعبين في كل فريق داخل الملعب؟", options: ["9","10","11","12"], correct: 2 },
      { question: "كم عدد الحكام المساعدين التقليديين (غير الحكم الرئيسي) في مباراة؟", options: ["1","2","3","4"], correct: 1 },
      { question: "كم مدة كل شوط في مباراة كرة القدم الرسمية؟", options: ["30 دقيقة","35 دقيقة","45 دقيقة","60 دقيقة"], correct: 2 },
      { question: "ما اسم أكبر بطولة للأندية في أوروبا؟", options: ["الدوري الأوروبي","دوري أبطال أوروبا","كأس الاتحاد الأوروبي","كأس السوبر الأوروبي"], correct: 1 },
      { question: "من فاز بكأس العالم 2018؟", options: ["الأرجنتين","ألمانيا","فرنسا","البرازيل"], correct: 2 },
      { question: "من فاز بكأس العالم 2014؟", options: ["الأرجنتين","ألمانيا","إسبانيا","هولندا"], correct: 1 },
      { question: "من فاز بكأس العالم 2010؟", options: ["إيطاليا","إسبانيا","ألمانيا","أوروغواي"], correct: 1 },
      { question: "من فاز بكأس العالم 2006؟", options: ["إيطاليا","فرنسا","البرازيل","ألمانيا"], correct: 0 },
      { question: "من فاز بكأس العالم 1998؟", options: ["فرنسا","البرازيل","الأرجنتين","إيطاليا"], correct: 0 },
      { question: "من فاز بكأس العالم 2002؟", options: ["البرازيل","ألمانيا","إسبانيا","الأرجنتين"], correct: 0 },
      { question: "أي من هذه الفرق إنجليزي؟", options: ["باريس سان جيرمان","بايرن ميونخ","ليفربول","أياكس"], correct: 2 },
      { question: "أي من هذه الفرق إسباني؟", options: ["ميلان","برشلونة","مانشستر يونايتد","بنفيكا"], correct: 1 },
      { question: "في كرة القدم، ماذا يعني التسلل (Offside)؟", options: ["اللاعب خلف الكرة","اللاعب أمام آخر مدافع وقت تمرير الكرة","عندما يلمس اللاعب الكرة بيده","عندما يتجاوز اللاعب خط الوسط"], correct: 1 },
      { question: "ما اسم كأس العالم للأندية؟", options: ["كأس السوبر","كأس العالم للأندية","دوري أبطال العالم","كأس القارات"], correct: 1 },
      { question: "من سجل هدف 'يد الله' في كأس العالم 1986؟", options: ["مارادونا","بيليه","زيدان","روماريو"], correct: 0 },
      { question: "أي لاعب يُعرف بلقب 'البرغوث'؟", options: ["كريستيانو رونالدو","ليونيل ميسي","نيمار","لويس سواريز"], correct: 1 },
      { question: "من هو هدّاف كأس العالم التاريخي (حتى 2022)؟", options: ["ميروسلاف كلوزه","رونالدو (البرازيلي)","كريستيانو رونالدو","ليونيل ميسي"], correct: 0 },
      { question: "ما اسم الملعب الشهير في مدينة مانشستر ينتمي لمانشستر يونايتد؟", options: ["الاتحاد","أولد ترافورد","آنفيلد","ويمبلي"], correct: 1 },
      { question: "ما اسم الملعب الشهير في ليفربول؟", options: ["أولد ترافورد","آنفيلد","إمارات","سان سيرو"], correct: 1 },
      { question: "من فاز بأول نسخة من دوري أبطال أوروبا (بصيغته الحديثة) عام 1956؟", options: ["ريال مدريد","ميلان","مانشستر يونايتد","بنفيكا"], correct: 0 },
      { question: "أي منتخب يُعرف بلقب 'السيليساو'؟", options: ["الأرجنتين","البرازيل","إسبانيا","إيطاليا"], correct: 1 },
      { question: "أي منتخب يُعرف بلقب 'البلوز'؟", options: ["إيطاليا","بريطانيا","إنجلترا","فرنسا"], correct: 3 },
      { question: "ما اسم كأس القارات السابق؟", options: ["كأس القارات","كأس الأمم","كأس الكونفدرالية","كأس التراث"], correct: 0 },
      { question: "من فاز بالكرة الذهبية (Ballon d'Or) عدة مرات حتى 2021؟", options: ["لويس سواريز","ليونيل ميسي","زلاتان إبراهيموفيتش","أندريه شيفشينكو"], correct: 1 },
      { question: "ما عدد الفرق المشاركة في نهائيات كأس العالم (ابتداءً من 1998)؟", options: ["24","32","48","16"], correct: 1 },
      { question: "ماذا يحصل عندما ينتهي الوقت الأصلي بالتعادل في مباراة خروج المغلوب؟", options: ["الوقت الإضافي ثم ركلات الترجيح إذا لزم","الاستمرار حتى يسجل أحد الفريقين","الاحتكام لأفضل فريق تصنيفاً","بقاء النتيجة وتعادلان"], correct: 0 },
      { question: "ما اسم اللاعب البرازيلي الشهير الملقب بـ 'O Rei' أو 'الملك'؟", options: ["رونالدو","بيليه","نيمار","زيدان"], correct: 1 },
      { question: "من فاز بدوري أبطال أوروبا 2020/2021؟", options: ["تشيلسي","مانشستر سيتي","ريال مدريد","بايرن ميونخ"], correct: 0 },
      { question: "في كرة القدم، ما هي المسافة التي تُؤخذ عند تنفيذ ركلة جزاء من خط المرمى؟", options: ["11 مترًا","9 أمتار","12 مترًا","10 أمتار"], correct: 0 },
      { question: "كم عدد الدقائق في الوقت الإضافي الاعتيادي؟", options: ["10 دقائق","15 دقيقة لكل شوط","30 دقيقة لكل شوط","5 دقائق"], correct: 1 },
      { question: "ما هي مدة التوقف التقريبي بين الشوطين في مباراة رسمية؟", options: ["5 دقائق","10 - 15 دقيقة","30 دقيقة","1 ساعة"], correct: 1 },
      { question: "أي من هذه الدول فازت بكأس العالم لكرة القدم؟", options: ["هولندا","البرتغال","إسبانيا","بلجيكا"], correct: 2 },
      { question: "ما اسم بطولة الأندية في أمريكا الجنوبية؟", options: ["كوبا ليبرتادوريس","كأس ليبرتادوريس","كوبا أمريكا","ليغا أمريكا"], correct: 0 },
      { question: "ما هو لون البطاقة التي يحصل عليها اللاعب عند طرد مباشر؟", options: ["أصفر","أخضر","أحمر","أزرق"], correct: 2 },
      { question: "ما اسم أشهر بطولة للأمم في أوروبا؟", options: ["كوبا أمريكا","كأس الأمم الأوروبية (يورو)","كأس آسيا","كأس أفريقيا"], correct: 1 },
      { question: "ما اسم اللاعب الأرجنتيني الشهير الذي فاز بكأس العالم 1986؟", options: ["ليونيل ميسي","دييغو مارادونا","غابرييل باتيستوتا","هورخي بوليدو"], correct: 1 },
      { question: "أي من هذه الفرق إيطالي؟", options: ["يوفنتوس","تشيلسي","باريس سان جيرمان","بورتو"], correct: 0 },
      { question: "من هو المدرب الشهير الذي قاد منتخب فرنسا للفوز بكأس العالم 1998؟", options: ["ريه لوف","ديدييه ديشامب","رافا بينيتيز","أريغو ساكي"], correct: 1 },
      { question: "ما اسم كأس الأمم في أمريكا الجنوبية؟", options: ["كوبا أمريكا","بطولة أمريكا","كأس ليبرتادوريس","كوبا السوبر"], correct: 0 },
      { question: "ما اسم المباراة التي تجمع بطل دوري أبطال أوروبا وبطل الدوري الأوروبي؟", options: ["كأس السوبر الأوروبي","كأس السوبر العالمي","كأس الأبطال","كأس السوبر الدولي"], correct: 0 },
      { question: "أي من هذه القوانين لا يعتبر خطأ؟", options: ["الخشونة المبالغ فيها","لمس الكرة باليد عمدًا","التدخل العنيف","التمرير للخلف للحارس داخل منطقة الجزاء"], correct: 3 },
      { question: "من هو صاحب الرقم القياسي لأكبر عدد أهداف في موسم واحد في دوري الأبطال (حتى 2021)؟", options: ["ليفاندوفسكي","كريستيانو رونالدو","ميسي","بارك جي سونغ"], correct: 1 },
      { question: "ما اسم البطولة القارية الكبرى في أفريقيا؟", options: ["كأس أفريقيا للأمم","دوري أفريقيا","كأس الكونفدرالية الأفريقية","كأس الأمم الأفريقية"], correct: 3 },
      { question: "أي منتخب استضاف كأس العالم 2018؟", options: ["روسيا","البرازيل","جنوب أفريقيا","ألمانيا"], correct: 0 },
      { question: "ما اسم اللاعب الفرنسي الشهير الذي سجل هدفي الفوز في نهائي كأس العالم 1998؟", options: ["زين الدين زيدان","تييري هنري","أوليفر كان","ديفيد بيكهام"], correct: 0 },
      { question: "في كرة القدم، ماذا يعني 'تسلل' بوضوح؟", options: ["أن يكون اللاعب أقرب إلى مرمى الخصم من الكرة ومن ثاني آخر مدافع أثناء استقبال الكرة","أن يكون اللاعب خلف لاعب آخر","أن يلعب اللاعب باليد","عندما يتحدث الحكم"], correct: 0 },
      { question: "ما اسم البطولة الدولية السنوية للأندية التي تعدّها الفيفا؟", options: ["كأس العالم للأندية","كأس السوبر المحلي","بطولة الأبطال","كأس العالم للأمم"], correct: 0 },
      { question: "ما البلد الذي فاز بكأس أمم أوروبا 2004 بطريقة مفاجئة؟", options: ["البرتغال","اليونان","فرنسا","إيطاليا"], correct: 1 },
      { question: "من هو اللاعب الإيطالي الشهير الملقب بـ 'بيبو'؟", options: ["فرانشيسكو توتي","أندريا بيرلو","روبرتو باجيو","باولو مالديني"], correct: 2 },
      { question: "ما اسم المنتخب الذي يُعرف بلقب 'الأسود الثلاثة'؟", options: ["إيطاليا","فرنسا","إنجلترا","ألمانيا"], correct: 2 },
      { question: "ما اسم اللاعب الذي فاز بالكرة الذهبية عدة مرات مع نادي برشلونة؟", options: ["رونالدينيو","ليونيل ميسي","لويس إنريكي","تشافي"], correct: 1 },
      { question: "أي من هذه الفرق من إسبانيا؟", options: ["أتليتيكو مدريد","نيوكاسل","إيه سي ميلان","أندرلخت"], correct: 0 },
      { question: "كم مدة التبديلات التقليدية المسموح بها في مباراة رسمية قبل قواعد التبديلات الموسعة؟", options: ["3 تبديلات","2 تبديل","5 تبديلات","4 تبديلات"], correct: 0 },
      { question: "ما اسم البطولة العالمية للمنتخبات التي تقام كل 4 سنوات؟", options: ["كأس العالم","يورو","كوبا أمريكا","كأس الأمم"], correct: 0 },
      { question: "ما هو فريق ريال مدريد لون قميصه الأساسي؟", options: ["أحمر","أبيض","أزرق","أسود"], correct: 1 },
      { question: "ما اسم اللاعب الذي اشتهر بـ 'الرجل الحديدي' في كرة القدم؟", options: ["فرانكي زامبريني","يارن توماسون","كيغن باركر","ريو فيرديناند"], correct: 3 },
      { question: "أي من هذه المدن استضافت نهائي دوري أبطال أوروبا أكثر من مرة؟", options: ["ويمبلي","ملبورن","طوكيو","نيويورك"], correct: 0 },
      { question: "ما هو اسم اللاعب البرازيلي الذي فاز بكأس العالم عام 2002 وسجل بكثرة؟", options: ["رونالدو","كايكا","رونالدينيو","روبيرتو كارلوس"], correct: 0 },
      { question: "ما البلد الذي يستضيف الدوري المعروف باسم 'البوندسليغا'؟", options: ["ألمانيا","إيطاليا","إنجلترا","إسبانيا"], correct: 0 },
      { question: "ما اسم الحارس الإيطالي الشهير الذي تألق في السبعينيات والثمانينات؟", options: ["جيانلويجي بوفون","جانلويجي بوفون","دينو زوف","إدواردو"], correct: 2 },
      { question: "أي منتخب استضاف كأس العالم 2014؟", options: ["البرازيل","الولايات المتحدة","روسيا","جنوب أفريقيا"], correct: 0 },
      { question: "ما اسم اللاعب الفرنسي الشهير زين الدين زيدان؟", options: ["مهاجم","لاعب وسط هجوم","حارس مرمى","مدافع"], correct: 1 },
      { question: "في كرة القدم، ماذا يعني 'ركلة زاوية'؟", options: ["ركلة تنفذ من زاوية الملعب بعد خروج الكرة من المرمى بواسطة المدافع","ضربة بداية","ركلة جزاء","ركلة حرة مباشرة"], correct: 0 },
      { question: "أي من هذه الفرق يلعب في الدوري الإنجليزي الممتاز؟", options: ["أرسنال","بروسيا دورتموند","أتلتيكو مدريد","ميلان"], correct: 0 },
      { question: "ما اسم اللاعب الأرجنتيني الذي فاز بالكرة الذهبية وحقق إنجازات كبيرة مع باريس سان جيرمان وأندية أخرى؟", options: ["ليونيل ميسي","دييغو فورلان","كارلوس تيليس","بابلو"], correct: 0 },
      { question: "ما اسم منتخب الماكينات؟", options: ["البرازيل","ألمانيا","إسبانيا","إيطاليا"], correct: 1 },
      { question: "ما اسم البطولة التي تقام بين منتخبات أمريكا الشمالية والوسطى والكاريبي؟", options: ["كونكاكاف جولد كاپ","كوبا أمريكا","كأس آسيا","كأس أفريقيا"], correct: 0 },
      { question: "أي من هذه القيم صحيحة عن ركلة الجزاء؟", options: ["تنفذ من مسافة 11 متراً","تنفذ من مسافة 9 أمتار","تنفذ من مسافة 13 متراً","تنفذ من دائرة الوسط"], correct: 0 },
      { question: "ما اسم اللاعب الذي يُعتبر واحداً من أعظم المهاجمين البرازيليين ولقب بـ 'القناص'؟", options: ["روماريو","رونالدو","أدريانو","رونالدينيو"], correct: 1 },
      { question: "أي من هذه الفرق يلعب على ملعب يُدعى 'سان سيرو'؟", options: ["إنتر ميلان و إيه سي ميلان","يوفنتوس","روما","لاتسيو"], correct: 0 },
      { question: "كم عدد نقاط الفوز في الدوري التقليدي (منذ عقود)؟", options: ["2 نقاط","3 نقاط","1 نقطة","4 نقاط"], correct: 1 },
      { question: "ما اسم الدرع الذي يفوز به الفائز بلقب الدوري الإنجليزي؟", options: ["درع البريميرليغ","كأس الدوري","كأس الاتحاد","درع السوبر"], correct: 0 },
      { question: "أي منهم لاعب شهير من البرتغال عرف بأهدافه الرائعة؟", options: ["رونالدو","ميسي","نيمار","زلاتان"], correct: 0 },
      { question: "ما هو اللون الرئيسي لقميص فريق برشلونة؟", options: ["أحمر-أزرق","أبيض","أصفر","أسود"], correct: 0 },
      { question: "ما هي لجنة تحكيم الفيديو المعروفة اختصارًا؟", options: ["VAR","VARH","VSR","VARO"], correct: 0 },
      { question: "أي من هذه الدول استضافت كأس العالم مرتين؟", options: ["روسيا","البرازيل","المكسيك","إسبانيا"], correct: 2 },
      { question: "ما اسم اللاعب الإيطالي الشهير باولو مالديني؟", options: ["مدافع","مهاجم","حارس","وسط"], correct: 0 },
      { question: "ما اسم المنتخب الذي فاز بكأس العالم 1966؟", options: ["إنجلترا","البرازيل","ألمانيا","إيطاليا"], correct: 0 },
      { question: "أي من هذه الفرق يلعب في الدوري الإسباني؟", options: ["ريال مدريد","مانشستر سيتي","تشيلسي","بايرن ميونخ"], correct: 0 },
      { question: "ما اسم اللاعب الأرجنتيني الذي فاز بكأس العالم 2022؟", options: ["ليونيل ميسي","أنخيل دي ماريا","دي ماريا","باولو ديبالا"], correct: 0 },
      { question: "ما هو اسم حارس منتخب إيطاليا الشهير في التسعينيات؟", options: ["جانلويجي بوفون","جيرمي ريبيرو","ألبرتو ماركيتي","دينو زوف"], correct: 3 },
      { question: "ما هي البطولة القارية في آسيا للمنتخبات؟", options: ["كأس آسيا","كأس اليابان","كأس آسيا الوسطى","كأس العرب"], correct: 0 },
      { question: "ما هي قيمة البطاقة الصفراء؟", options: ["تحذير","طرد فوري","لا شيء","ركلة جزاء"], correct: 0 },
      { question: "ما اسم المنتخب الذي فاز بكأس العالم 1994؟", options: ["البرازيل","ألمانيا","إيطاليا","الأرجنتين"], correct: 0 },
      { question: "ما هو لقب منتخب فرنسا الوطني؟", options: ["الديوك","المانشافت","البلوز","الساموراي"], correct: 0 },
      { question: "ما اسم الدوري الممتاز في إنجلترا بالإنجليزية؟", options: ["Premier League","La Liga","Serie A","Bundesliga"], correct: 0 },
      { question: "أي من هذه الفرق من البرتغال؟", options: ["بنفيكا","ريال مدريد","برشلونة","يوفنتوس"], correct: 0 },
      { question: "ما اسم اللاعب الأوروغواياني الشهير لويس سواريز يلعب كم؟", options: ["مهاجم","حارس","مدافع","لاعب وسط"], correct: 0 },
      { question: "ما البلد الذي تستضيفه بطولة الكوبا أمريكا دورياً؟", options: ["تتغير الاستضافة بين دول أمريكا الجنوبية","دائماً البرازيل","دائماً الأرجنتين","دائماً تشيلي"], correct: 0 },
      { question: "أي من هذه الفرق يلعب في الدوري الألماني؟", options: ["بايرن ميونخ","برشلونة","يوفنتوس","مانشستر يونايتد"], correct: 0 },
      { question: "ما اسم المباراة الفاصلة بين اثنين من الفرق لنيل الكأس؟", options: ["نهائي","تصفيات","مباراة ودية","كأس سوبر"], correct: 0 },
      { question: "ما هو البلد الذي استضاف كأس العالم 2006؟", options: ["ألمانيا","إيطاليا","فرنسا","الولايات المتحدة"], correct: 0 },
      { question: "أي من هذه الفرق يلعب في الدوري الفرنسي؟", options: ["باريس سان جيرمان","مانشستر يونايتد","ريال مدريد","يوفنتوس"], correct: 0 },
      { question: "ما اسم اللاعب الذي فاز بكأس العالم 2010 مع إسبانيا؟", options: ["أندريس إنييستا","ليونيل ميسي","رونالدو","زلاتان إبراهيموفيتش"], correct: 0 },
      { question: "ما هي النتيجة التي تؤدي إلى فوز في مباراة كرة قدم؟", options: ["تفوق هدف واحد على الأقل","تعادل","خسارة","لا شيء مما سبق"], correct: 0 },
      { question: "ما معنى مصطلح " + '"ديربي"' + " في كرة القدم؟", options: ["مباراة بين فريقين من نفس المدينة أو منطقة قريبة","مباراة ودية","نهائي كأس","مباراة تأهيلية"], correct: 0 },
      { question: "أي من هذه البطولات تقام للمنتخبات الأفريقية؟", options: ["كأس الأمم الأفريقية","دوري أبطال أفريقيا","كأس السوبر الأفريقي","كأس الكونفدرالية"], correct: 0 },
      { question: "ما اسم اللاعب الأرجنتيني الشهير الذي لقب بـ 'البرغوث'؟", options: ["ليونيل ميسي","دييغو مارادونا","غابرييل باتيستوتا","كارلوس تيفيز"], correct: 0 },
      { question: "أي من هذه الفرق يلعب على ملعب 'سانتياغو برنابيو'؟", options: ["ريال مدريد","برشلونة","أتلتيكو مدريد","فالنسيا"], correct: 0 },
      { question: "ما اسم الحارس الشهير بيتر تشيك يلعب لأي فريق سابقاً؟", options: ["تشيلسي وآرسنال","ليفربول","برشلونة","ريال مدريد"], correct: 0 },
      { question: "ما اسم البطولة التي تجمع أبطال القارات أحياناً؟", options: ["كأس العالم للأندية","كأس السوبر المحلي","كأس القارات","كأس الاتحاد"], correct: 0 },
      { question: "أي من هذه الدول لم تفز بكأس العالم؟", options: ["هولندا","إسبانيا","البرازيل","ألمانيا"], correct: 0 },
      { question: "ما اسم اللاعب الذي اشتهر بمهاراته في كأس العالم 2006 وأحرز العديد من الأهداف لفرنسا؟", options: ["هنري","زيدان","أنيلكا","بينيتيز"], correct: 1 }
    ];

    // === عناصر DOM ===
    const totalEl = document.getElementById('total');
    const currentEl = document.getElementById('current');
    const scoreEl = document.getElementById('score');
    const questionEl = document.getElementById('question');
    const optionsEl = document.getElementById('options');
    const progressBar = document.getElementById('progressBar');
    const stageEl = document.getElementById('stage');
    const stageBanner = document.getElementById('stageBanner');
    const nextBtn = document.getElementById('nextBtn');
    const restartBtn = document.getElementById('restartBtn');
    const downloadBtn = document.getElementById('downloadBtn');

    let shuffled = [...questions];
    // shuffle
    function shuffle(a){
      for(let i=a.length-1;i>0;i--){
        const j = Math.floor(Math.random()*(i+1));
        [a[i],a[j]]=[a[j],a[i]];
      }
      return a;
    }
    shuffled = shuffle(shuffled);

    let current = 0;
    let score = 0;
    const total = shuffled.length;

    totalEl.textContent = total;

    function getStage(index){
      const n = index + 1;
      if(n<=20) return 'دور المجموعات';
      if(n<=40) return 'دور الـ16';
      if(n<=60) return 'ربع النهائي';
      if(n<=80) return 'نصف النهائي';
      return 'النهائي';
    }

    function updateProgress(){
      const pct = Math.round(((current)/total)*100);
      progressBar.style.width = pct + '%';
      stageEl.textContent = getStage(current);
      stageBanner.textContent = getStage(current);
    }

    function loadQuestion(){
      if(current>=total){
        showResult();
        return;
      }
      const q = shuffled[current];
      currentEl.textContent = current+1;
      scoreEl.textContent = score;
      questionEl.textContent = q.question;
      optionsEl.innerHTML = '';
      q.options.forEach((opt, i)=>{
        const btn = document.createElement('button');
        btn.className = 'option p-3 bg-white/5 rounded text-right';
        btn.innerHTML = `<div>${opt}</div>`;
        btn.dataset.idx = i;
        btn.addEventListener('click', ()=> selectAnswer(btn, i));
        optionsEl.appendChild(btn);
      });
      nextBtn.disabled = true;
      updateProgress();
    }

    function selectAnswer(btn, idx){
      // prevent double click
      if(nextBtn.disabled===false && current<total) return;
      const q = shuffled[current];
      const buttons = Array.from(optionsEl.children);
      buttons.forEach(b=>{ b.disabled = true; });

      if(idx === q.correct){
        btn.classList.add('correct');
        score += 3;
      } else {
        btn.classList.add('wrong');
        // mark correct one
        const correctBtn = buttons.find(b => Number(b.dataset.idx) === q.correct);
        if(correctBtn) correctBtn.classList.add('correct');
        score -= 1;
        if(score<0) score=0;
      }

      scoreEl.textContent = score;
      nextBtn.disabled = false;
    }

    nextBtn.addEventListener('click', ()=>{
      current++;
      loadQuestion();
    });

    restartBtn.addEventListener('click', ()=>{
      shuffled = shuffle([...questions]);
      current = 0; score = 0;
      loadQuestion();
    });

    downloadBtn.addEventListener('click', ()=>{
      try{
        const blob = new Blob([document.documentElement.outerHTML], {type: 'text/html;charset=utf-8'});
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = 'football-quiz.html';
        document.body.appendChild(a);
        a.click();
        a.remove();
        URL.revokeObjectURL(url);
      }catch(e){
        alert('فشل في إنشاء الملف للتنزيل');
      }
    });

    function showResult(){
      // عرض نتيجة بسيطة
      questionEl.textContent = `انتهت اللعبة! نقاطك: ${score} من ${total*3}`;
      optionsEl.innerHTML = '';
      nextBtn.disabled = true;
      stageBanner.textContent = 'النتيجة النهائية';
      progressBar.style.width = '100%';
    }

    // ابدأ اللعبة
    loadQuestion();

  } catch (err) {
    console.error(err);
    // إظهار رسالة خطأ داخل الصفحة للمستخدم
    const qEl = document.getElementById('question');
    qEl.textContent = 'حدث خطأ أثناء تحميل الأسئلة. افتح Console في المتصفح لرؤية التفاصيل.';
  }
});
</script></body>
</html>
